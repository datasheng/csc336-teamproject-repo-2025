<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Register for Event | CCNY Beavers Event Ticketing</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>

<body>
  <!-- HEADER -->
  <header>
    <div class="header-container">
      <div class="logo">
        <h1>CCNY Beavers</h1>
        <p>Campus Event Ticketing System</p>
      </div>
      <nav>
        <ul>
          <li><a href="{{ url_for('index') }}">Home</a></li>
          <li><a href="{{ url_for('event_list') }}">Events</a></li>
          <li><a href="{{ url_for('register_for_event') }}" class="active">Register</a></li>
          {% if session.get('org_id') %}
          <li><a href="{{ url_for('logout') }}">Logout</a></li>
          {% else %}
          <li><a href="{{ url_for('login_register') }}">Organization Login</a></li>
          {% endif %}
          <li><a href="{{ url_for('create_event') }}">Create Event</a></li>
          <li><a href="{{ url_for('revenue_dashboard') }}">Revenue</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- REGISTRATION FORM -->
  <main class="container">
    <section class="form-container">
      <h2>Event Registration</h2>
      <p class="text-center mb-2">Please complete the form below to register for a CCNY event.</p>

      <!-- BACKEND: This entire form will later POST data to Flask -->
      <!-- BACKEND: Each input will be mapped to the Tickets and Payments tables in the database -->
      <form action="#" method="POST">

        <!-- Event Selection -->
        <div class="form-group">
          <label for="event">Select Event</label>
          <select id="event" name="event" required>
            <option value="">-- Choose an Event --</option>
            {% for event in events %}
            <option value="{{ event.event_id }}" {% if request.args.get('event_id')==event.event_id|string %}selected{%
              endif %}>
              {{ event.title }}
            </option>
            {% endfor %}
          </select>
        </div>

        <!-- Full Name -->
        <div class="form-group">
          <label for="fullname">Full Name</label>
          <input type="text" id="fullname" name="fullname" placeholder="Enter your full name" required />
        </div>

        <!-- CCNY Email -->
        <div class="form-group">
          <label for="email">CCNY Email</label>
          <input type="email" id="email" name="email" placeholder="Enter your CCNY email" required />
        </div>

        <!-- Student ID -->
        <div class="form-group">
          <label for="studentid">CCNY Student ID</label>
          <input type="text" id="studentid" name="studentid" placeholder="Enter your 8-digit Student ID" required />
        </div>

        <!-- Payment Method -->
        <div class="form-group">
          <label for="payment">Payment Method</label>
          <select id="payment" name="payment" required>
            <!-- BACKEND: Payment method options can later be validated or processed through Payments table -->
            <option value="">-- Select Payment Method --</option>
            <option value="credit">Credit/Debit Card</option>
            <option value="cash">Cash at Door</option>
          </select>
        </div>

        <!-- Optional Notes -->
        <div class="form-group">
          <label for="notes">Additional Notes (optional)</label>
          <textarea id="notes" name="notes" placeholder="Add any additional information..."></textarea>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
          <button type="submit" class="btn btn-primary">Submit Registration</button>
        </div>

        <!-- BACKEND: On form submission -->
        <!-- Validate all fields and ensure event exists in Events table -->
        <!--  Insert registration details into Tickets table -->
        <!-- Insert payment record in Payments table if applicable -->
        <!-- Redirect user to thank_you.html after successful registration -->
        <!-- Handle errors (duplicate registration, missing fields) gracefully -->
      </form>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    <p>City College of New York â€¢ CCNY Beavers Event Ticketing System</p>
  </footer>
</body>

</html>