<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Revenue Dashboard | CCNY Beavers Event Ticketing</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <!-- HEADER (same across all pages) -->
  <header>
    <div class="header-container">
      <div class="logo">
        <h1>CCNY Beavers</h1>
        <p>Event Ticketing System</p>
      </div>

      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="event-detail.html">Events</a></li>
          <li><a href="register.html">Register</a></li>
          <li><a href="login.html">Organization Login</a></li>
          <li><a href="create-event.html">Create Event</a></li>
          <li><a href="revenue.html" class="active">Revenue</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- REVENUE DASHBOARD-->
  <main class="container">

    <section class="section-header">
      <h2>Revenue Dashboard</h2>
      <p>Track event earnings, ticket sales, and attendance performance.</p>
    </section>

    <!-- ===================================
         STATS CARDS (Dynamic Backend Values)
         =================================== -->
    <div class="stats-grid">

      <!-- BACKEND:
           Replace {{ total_revenue }} with real value from database -->
      <div class="stat-card gold">
        <h3>Total Revenue</h3>
        <div class="stat-value">
          ${{ total_revenue }}
        </div>
      </div>

      <!-- BACKEND:
           Replace {{ total_tickets_sold }} with actual count -->
      <div class="stat-card">
        <h3>Total Tickets Sold</h3>
        <div class="stat-value">
          {{ total_tickets_sold }}
        </div>
      </div>

      <!-- BACKEND:
           Replace {{ events_count }} with count of events hosted -->
      <div class="stat-card">
        <h3>Events Hosted</h3>
        <div class="stat-value">
          {{ events_count }}
        </div>
      </div>

      <!-- BACKEND:
           Replace {{ avg_attendance }} with average percentage -->
      <div class="stat-card">
        <h3>Average Attendance</h3>
        <div class="stat-value">
          {{ avg_attendance }}%
        </div>
      </div>

    </div>

    <!--REVENUE TABLE (Dynamic Loop)-->
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Event Name</th>
            <th>Date</th>
            <th>Tickets Sold</th>
            <th>Revenue ($)</th>
            <th>Attendance (%)</th>
          </tr>
        </thead>

        <tbody>
          <!-- BACKEND:
               Flask will loop through each event and fill rows.
               revenue_data = list of event dictionaries.
          -->
          {% for event in revenue_data %}
          <tr>
            <td>{{ event.name }}</td>
            <td>{{ event.date }}</td>
            <td>{{ event.tickets_sold }}</td>
            <td>{{ event.revenue }}</td>
            <td>{{ event.attendance }}%</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!--EXPORT TO EXCEL BUTTON-->
    <div class="text-center mt-3">
      <!-- BACKEND:
           Button should download an Excel file generated from MySQL data.
           Placeholder for now. -->
      <button class="btn btn-secondary">Export to Excel (Placeholder)</button>
    </div>

  </main>

  <!-- FOOTER -->
  <footer>
    <p>City College of New York • CCNY Beavers Event Ticketing System</p>
  </footer>

</body>
</html>

<!-- BACKEND ACCESS CONTROL NOTE
 This page must ONLY be visible to logged-in organizations.

 Backend must:
 - Check if session['org_id'] exists
 - If NOT logged in → redirect to login.html
 - If logged in → load revenue data and show this page
-->
